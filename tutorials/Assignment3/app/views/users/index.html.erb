<h1>Users Data</h1>
<div class="createbtn">
<%=link_to "Create", new_user_path %>
</div>
<table>
  <thead>
    <th>Name</th>
    <th>Email</th>
    <th>Address</th>
    <th>Phone number</th>
    <th>Operations</th>
  </thead>
  <% @users.each do |user| %>
  <tr>
    <td><%= user.name %></td>
    <td><%= user.email %></td>
    <td><%= user.address %></td>
    <td><%= user.phone_number%></td>
    <td>
      <%= link_to "Edit", edit_user_path(user) %>
      <%= link_to "Delete", user, method: :delete, data: { confirm: "Are you sure you want to delete this user?"} %>
    </td>
  </tr>
  <% end %>
</table>

 <%= form_with url: search_database_url, local: "true" do |form| %>
    <div class="input">
      <%= form.text_field :attr, name: "name", placeholder: "Name" %>
    </div>
     <div class="input">
      <%= form.text_field :attr, name: "email", placeholder: "Email" %>
    </div>
    <div class="input">
      <%= form.text_field :attr, name: "address", placeholder: "Address" %>
    </div>
     <div class="input">
      <%= form.text_field :attr, name: "phone_number", placeholder: "Phone number" %>
    </div>
     

 
    <div class="button">
      <%= form.submit :search %>
    </div>

  <% end %>
<% if params[:name]!= ''&&params[:email]== '' && params[:address]== ''&& params[:phone_number]=='' %>
 <% @sql = "Select name,email,phone_number,address from users where (name='#{params[:name]}');" %>    

<% elsif params[:name]== ''&&params[:email]!='' && params[:address]== ''&& params[:phone_number]==''%>
<% @sql = "Select name,email,phone_number,address from users where (email='#{params[:email]}');" %> 

<% elsif params[:name]== ''&&params[:email]=='' && params[:address]!= ''&& params[:phone_number]==''%>
<% @sql = "Select name,email,phone_number,address from users where (address='#{params[:address]}');" %> 

<% elsif params[:name]== ''&&params[:email]=='' && params[:address]== ''&& params[:phone_number]!=''%>
<% @sql = "Select name,email,phone_number,address from users where (phone_number='#{params[:phone_number]}');" %> 

<% elsif params[:name]!= ''&&params[:email]!='' && params[:address]== ''&& params[:phone_number]==''%>
<% @sql = "Select name,email,phone_number,address from users where (name='#{params[:name]}' && email='#{params[:email]}');" %> 

<% elsif params[:name]!= ''&&params[:email]=='' && params[:address]!= ''&& params[:phone_number]==''%>
<% @sql = "Select name,email,phone_number,address from users where (name='#{params[:name]}' && address='#{params[:address]}');" %> 

<% elsif params[:name]!= ''&&params[:email]=='' && params[:address]== ''&& params[:phone_number]!=''%>
<% @sql = "Select name,email,phone_number,address from users where (name='#{params[:name]}' && phone_number='#{params[:phone_number]}');" %> 

<% elsif params[:name]== ''&&params[:email]!='' && params[:address]!= ''&& params[:phone_number]==''%>
<% @sql = "Select name,email,phone_number,address from users where (email='#{params[:email]}' && address='#{params[:address]}');" %> 

<% elsif params[:name]== ''&&params[:email]!='' && params[:address]== ''&& params[:phone_number]!=''%>
<% @sql = "Select name,email,phone_number,address from users where (email='#{params[:email]}' && phone_number='#{params[:phone_number]}');" %> 

<% elsif params[:name]== ''&&params[:email]=='' && params[:address]!= ''&& params[:phone_number]!=''%>
<% @sql = "Select name,email,phone_number,address from users where (address='#{params[:address]}' && phone_number='#{params[:phone_number]}');" %> 

<% elsif params[:name]!= ''&&params[:email]!='' && params[:address]!= ''&& params[:phone_number]==''%>
<% @sql = "Select name,email,phone_number,address from users where (name='#{params[:name]}' && email='#{params[:email]}'&& address='#{params[:address]}') ;" %> 

<% elsif params[:name]!= ''&&params[:email]=='' && params[:address]!= ''&& params[:phone_number]!=''%>
<% @sql = "Select name,email,phone_number,address from users where (name='#{params[:name]}'&& address='#{params[:address]}' && phone_number='#{params[:phone_number]}');" %> 


<% elsif params[:name]!= ''&&params[:email]!='' && params[:address]== ''&& params[:phone_number]!=''%>
<% @sql = "Select name,email,phone_number,address from users where (name='#{params[:name]}'&& email='#{params[:email]}' && phone_number='#{params[:phone_number]}');" %> 

<% elsif params[:name]!= ''&&params[:email]!='' && params[:address]!= ''&& params[:phone_number]!=''%>
<% @sql = "Select name,email,phone_number,address from users where (name ='#{params[:name]}' && email='#{params[:email]}'&& address='#{params[:address]}' && phone_number='#{params[:phone_number]}');" %> 

<% else%>
<% @sql = "select 1 from dual where false" %> 
<% end %>
<%  @records_array = ActiveRecord::Base.connection.execute(@sql).to_a %>

<table>
  <thead>
    <th>Name</th>
    <th>Email</th>
    <th>Address</th>
    <th>Phone number</th>
  </thead>
  <% @records_array.each do |record| %>
  <tr>
    <td><%= record[0] %></td>
    <td><%= record[1] %></td>
    <td><%= record[2] %></td>
    <td><%= record[3] %></td>
  </tr>
  <% end %>
</table>
